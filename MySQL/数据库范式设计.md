## 数据库范式设计

### 1. 数据库有哪些范式？

#### 范式是什么？

范式(normalform) 可以理解为，一张关系表的设计结构需要满足的某种设计标准的级别

#### 分类

目前的关系数据库一共有6种范式，按照范式级别，从高到低分别是：1NF(第一范式)、2NF(第二范式)、3NF(第三范式)、BCNF(巴斯-科德范式)、4NF(第四范式)、5NF(第五范式，又叫做完美范式)

#### 特点

- 范式设计越高阶，冗余度越低
- 高阶的范式一定符合低阶范式的要求

一般来说，数据表的设计应该尽量满足3NF，但是有些时候为了提高某些查询性能，我们还需要破坏范式规则，也就是反范式设计

### 2. 数据表中有哪些键？

范式的定义会使用到主键和候选键(因为主键和候选键可以唯一标识元祖，元祖就是表的一行)，数据库中的键(Key)由一个或者多个属性组成

- 超键：能唯一标识元祖的属性集叫做超键
- 候选键：如果超键不包括多余的属性，那么这个超键就是候选键
- 主键：用户可以从候选键中选择一个作为主键
- 外键：如果数据表R1中的某属性集不是R1的主键，而是另一个数据表R2的主键，那么这个属性集就是数据表R1的外键
- 主属性：包含在候选键中的任一属性称为主属性
- 非主属性：与主属性相对，指的是不包含在任何一个候选键中的属性

### 3. 从1NF 到 3NF

#### 1NF 

数据库表中的任何属性都是原子性的，不可再分。不同的业务，对不可再分的要求也不一样

#### 2NF

数据表里的非主属性都要和这个数据表的候选键有完全依赖关系

- 完全依赖关系

  依赖于候选键的全部属性

- 部分依赖关系

  依赖于候选键的一部分属性

#### 3NF

在满足2NF的同时，对任何非主属性都不传递依赖于候选键

### 4. BCNF(巴斯-科德范式)

在3NF的基础上消除了主属性对候选键的部分依赖或者传递依赖关系

### 5. 总结

- 1NF 需要保证表中每个属性都保持原子性；
- 2NF 需要保证表中的非主属性与候选键完全依赖；
- 3NF 需要保证表中的非主属性与候选键不存在传递依赖。
- BCNF 需要保证表中的主属性与候选键不存在部分依赖或者传递依赖。

